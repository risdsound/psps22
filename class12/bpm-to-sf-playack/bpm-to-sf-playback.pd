#N canvas 657 368 1452 974 12;
#X declare -path else;
#X text 180 278 cents;
#X obj 170 298 nbx 5 16 -1e+37 1e+37 0 0 empty \$0-cents empty 0 -8
0 13 #dcdcdc #000000 #000000 0 256;
#X obj 81 298 nbx 4 16 -1e+37 1e+37 0 0 empty \$0-speed empty 0 -8
0 13 #dcdcdc #000000 #000000 0 256;
#X obj 260 298 nbx 4 16 64 8192 0 0 empty \$0-size empty 0 -8 0 13
#dcdcdc #000000 #000000 0 256;
#X obj 143 162 bng 20 250 50 0 empty empty empty 17 7 0 10 #dcdcdc
#000000 #000000;
#N canvas 681 47 615 349 buffer 0;
#X obj 347 165 table \$0-buffer;
#X obj 232 175 soundfiler;
#X obj 69 85 openpanel;
#X obj 69 108 list append \$0-buffer;
#X msg 69 132 read -resize \$1 \$2;
#X obj 69 49 inlet;
#X obj 232 205 t b f;
#X obj 232 120 initmess read -resize bubul.wav \$0-buffer;
#X obj 281 206 s \$0-length;
#X obj 232 233 message \; \$0-speed 100 \; \$0-cents -400 \; \$0-size
4096;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 4 0 1 0;
#X connect 5 0 2 0;
#X connect 6 0 9 0;
#X connect 6 1 8 0;
#X connect 7 0 1 0;
#X restore 143 188 pd buffer;
#X text 272 276 size;
#N canvas 752 48 803 789 Pitch-Shit/Time-Stretch 0;
#X obj 184 742 outlet~;
#X obj 114 46 inlet;
#X obj 237 48 inlet;
#X obj 373 48 inlet;
#X obj 60 256 bang~;
#X obj 254 567 phasor~;
#X obj 184 677 *~;
#X obj 237 86 nbx 5 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 15
#e4ccb4 #000000 #000000 0 256;
#X obj 236 652 *~;
#X obj 184 710 +~;
#X obj 114 116 / 100;
#X obj 174 382 +;
#X msg 396 224 set \$1;
#X obj 373 149 nbx 5 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 15
#f8f4bc #000000 #000000 0 256;
#X obj 114 87 nbx 5 18 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 15
#c4fcfc #000000 #000000 0 256;
#X text 328 85 cents;
#X floatatom 237 312 7 0 0 0 - - - 0;
#X floatatom 308 345 6 0 0 0 - - - 0;
#X obj 373 467 / 2;
#X floatatom 373 499 8 0 0 0 - - - 0;
#X floatatom 237 465 0 0 0 0 - - - 0;
#X obj 107 511 +~;
#X obj 60 320 f;
#X text 400 467 overlap;
#X text 97 88 %;
#X obj 237 430 / 2;
#X text 265 431 overlap;
#X obj 96 332 wrap2;
#X obj 237 226 hot;
#X obj 107 538 wrap2~;
#X obj 41 568 wrap2~;
#X obj 236 678 ffdelay~ 4096 -samps;
#X obj 237 119 cents2ratio;
#X obj 41 620 tabread4~ \$0-buffer, f 9;
#X obj 107 575 tabread4~ \$0-buffer, f 9;
#X obj 237 255 *;
#X obj 308 319 samps2ms;
#X text 387 126 size;
#X obj 396 252 block~;
#X obj 254 596 envelope~;
#X obj 254 537 blocksize~ -hz;
#X text 272 652 overlap;
#X obj 114 212 hot;
#X obj 114 241 *;
#X obj 96 308 +;
#X floatatom 237 152 8 0 0 0 - - - 0;
#X text 182 152 ratio;
#X obj 106 401 t f f;
#X obj 107 438 pack f f f;
#X text 242 290 new size;
#X text 117 22 Speed;
#X text 221 25 transposition;
#X text 357 24 grain size;
#X text 150 245 step;
#X obj 114 266 nbx 7 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10
#c4fcfc #000000 #000000 0 256;
#X obj 107 467 envgen~;
#X text 500 209 The step parameter defines the speed from a percentage
of the grain size. This is the step where the next grain starts. The
transposition in cents is converted to ratio and defines a new grain
size., f 36;
#X text 500 310 The [envgen~] object then reads the grain with a start
point (dependent on the step parameter) \, a duration (from the grain
size in ms) and destination point (from the "new size")., f 36;
#X text 500 405 We need to read two overlapped grains. The second grain
needs to have an adjusted read point according to the new grain size.
The envelope also needs to be overlapped and a delay object is what
actually performs the overlap. A [phasor~] drives the envelopes and
its frequency depends on the block size (given by [blocksize~]).,
f 36;
#X floatatom 146 333 0 0 0 0 - - - 0;
#X text 356 346 <= size in ms;
#X obj 146 305 r \$0-length;
#X obj 165 545 r \$0-length;
#X connect 1 0 14 0;
#X connect 2 0 7 0;
#X connect 3 0 13 0;
#X connect 4 0 22 0;
#X connect 5 0 39 0;
#X connect 6 0 9 0;
#X connect 7 0 32 0;
#X connect 8 0 31 0;
#X connect 9 0 0 0;
#X connect 10 0 42 0;
#X connect 11 0 48 2;
#X connect 12 0 38 0;
#X connect 13 0 12 0;
#X connect 13 0 18 0;
#X connect 13 0 28 1;
#X connect 13 0 36 0;
#X connect 13 0 42 1;
#X connect 14 0 10 0;
#X connect 16 0 11 1;
#X connect 16 0 25 0;
#X connect 17 0 48 1;
#X connect 18 0 19 0;
#X connect 19 0 31 1;
#X connect 20 0 21 1;
#X connect 21 0 29 0;
#X connect 22 0 44 0;
#X connect 22 0 47 0;
#X connect 25 0 20 0;
#X connect 27 0 22 1;
#X connect 28 0 35 0;
#X connect 28 1 35 1;
#X connect 29 0 34 0;
#X connect 30 0 33 0;
#X connect 31 0 9 1;
#X connect 32 0 45 0;
#X connect 33 0 6 0;
#X connect 34 0 8 0;
#X connect 35 0 16 0;
#X connect 36 0 17 0;
#X connect 39 0 6 1;
#X connect 39 0 8 1;
#X connect 40 0 5 0;
#X connect 42 0 43 0;
#X connect 42 1 43 1;
#X connect 43 0 54 0;
#X connect 44 0 27 0;
#X connect 45 0 28 0;
#X connect 47 0 48 0;
#X connect 47 1 11 0;
#X connect 48 0 55 0;
#X connect 54 0 44 1;
#X connect 55 0 21 0;
#X connect 55 0 30 0;
#X connect 59 0 27 2;
#X connect 61 0 59 0;
#X connect 62 0 29 2;
#X connect 62 0 30 2;
#X restore 81 324 pd Pitch-Shit/Time-Stretch;
#X text 71 277 speed (%);
#X obj 42 19 declare -path else;
#X obj 818 463 t b b;
#X obj 818 507 timer;
#X obj 834 406 bng 15 250 50 0 empty empty empty 0 -6 0 10 #fcfcfc
#000000 #000000;
#X obj 818 549 expr 60000 / $f1;
#X floatatom 818 585 10 0 0 0 - - - 0;
#N canvas 0 23 1040 834 superTT 0;
#X obj 307 139 t b b;
#X obj 307 183 timer;
#N canvas 0 0 450 300 (subpatch) 0;
#X array \$0-tt 6 float 2;
#X coords 0 1000 6 -1 40 50 1;
#X restore 501 202 graph;
#X obj 530 320 f;
#X msg 572 289 0;
#X obj 557 378 + 1;
#X obj 530 350 t f f;
#X obj 449 376 tabwrite \$0-tt;
#X obj 572 257 loadbang;
#X obj 308 364 until;
#X msg 355 397 0;
#X obj 308 430 f;
#X obj 308 512 tabread \$0-tt;
#X obj 308 541 + 0;
#X obj 308 462 t f f;
#X obj 335 489 + 1;
#X obj 308 567 t f f;
#X obj 220 472 f;
#X obj 308 300 t b b b;
#X msg 388 396 0;
#X obj 307 223 t b b f b;
#X obj 220 612 expr 60000 / $f1;
#X obj 307 92 inlet bang;
#X obj 96 673 outlet ms;
#X obj 220 671 outlet bpm;
#X obj 557 406 sel 6;
#X msg 308 339 6;
#X obj 220 498 / 6;
#X obj 426 100 pdcontrol;
#X msg 425 71 browse https://forum.pdpatchrepo.info/topic/1494/tap-tempo/2
;
#X text 425 45 example by domien;
#X connect 0 0 1 0;
#X connect 0 1 1 1;
#X connect 1 0 20 0;
#X connect 3 0 6 0;
#X connect 4 0 3 1;
#X connect 5 0 25 0;
#X connect 6 0 7 1;
#X connect 6 1 5 0;
#X connect 8 0 4 0;
#X connect 9 0 11 0;
#X connect 10 0 11 1;
#X connect 11 0 14 0;
#X connect 12 0 13 0;
#X connect 13 0 16 0;
#X connect 14 0 12 0;
#X connect 14 1 15 0;
#X connect 15 0 11 1;
#X connect 16 0 17 1;
#X connect 16 1 13 1;
#X connect 17 0 27 0;
#X connect 18 0 26 0;
#X connect 18 1 10 0;
#X connect 18 2 19 0;
#X connect 19 0 13 1;
#X connect 20 0 17 0;
#X connect 20 1 18 0;
#X connect 20 2 7 0;
#X connect 20 3 3 0;
#X connect 21 0 24 0;
#X connect 22 0 0 0;
#X connect 25 0 4 0;
#X connect 25 1 3 1;
#X connect 26 0 9 0;
#X connect 27 0 21 0;
#X connect 27 0 23 0;
#X connect 29 0 28 0;
#X restore 693 210 pd superTT;
#X floatatom 693 247 8 0 0 3 ms - - 0;
#X floatatom 767 251 10 0 0 3 bpm - - 0;
#X text 776 211 averages over 6 taps;
#X text 763 460 2 taps;
#X text 204 17 need to install else library (Help > Find Externals)
;
#X obj 52 79 pdcontrol;
#X msg 51 50 browse https://github.com/porres/pd-else/releases;
#X text 408 49 Or get it from here is necessary \, place in Documents
> Pd > externals, f 84;
#X obj 84 485 dac~;
#X obj 84 443 *~;
#X obj 127 417 line~;
#X msg 127 389 \$1 100;
#X obj 130 362 hsl 128 15 0 1 0 0 empty empty empty -2 -8 0 10 #fcfcfc
#000000 #000000 0 1;
#X text 274 358 volume;
#X obj 624 499 / 120;
#X obj 621 533 * 100;
#X floatatom 617 572 5 0 0 0 - - - 0;
#X obj 692 165 bng 15 250 50 0 empty empty empty 0 -6 0 10 #fcfcfc
#000000 #000000;
#X obj 616 619 s \$0-speed;
#X text 185 161 1) load soundfile;
#X text 722 154 2) tap 6 times to figure out the BPM of song;
#X text 864 395 3) tap once to change BPM (based on time between bangs)
\; could be used for contant foot tap to change BPM constantly;
#X text 182 258 pitch;
#X connect 1 0 7 1;
#X connect 2 0 7 0;
#X connect 3 0 7 2;
#X connect 4 0 5 0;
#X connect 7 0 25 0;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 11 0 13 0;
#X connect 12 0 10 0;
#X connect 13 0 14 0;
#X connect 14 0 30 0;
#X connect 15 0 16 0;
#X connect 15 1 17 0;
#X connect 17 0 30 1;
#X connect 22 0 21 0;
#X connect 25 0 24 0;
#X connect 25 0 24 1;
#X connect 26 0 25 1;
#X connect 27 0 26 0;
#X connect 28 0 27 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 34 0;
#X connect 33 0 15 0;
